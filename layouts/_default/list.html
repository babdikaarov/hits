{{ define "main" }}
  <main class="container  mx-auto">
    <div class="markdown mb-9">
      <div>{{ .Content }}</div>
    </div>
    {{ $currentPage := .Permalink }}
    <ul class="my-4 *:mt-1 first:mt-0">
      {{ with .Site.Taxonomies }}
        {{ range $key, $value := . }}
          <li class="flex">
            {{ if gt (len $value) 0 }}
              {{ $translatedName := i18n ($key) }}
              {{ if $translatedName }}
                <h4 class="mr-2 text-gray-500">{{ $translatedName }}:</h4>
              {{ else }}
                <h4 class="mr-2 text-gray-500">{{ $key }}:</h4>
              {{ end }}
              <div class="flex gap-4">
                {{ range $termKey, $termValue := $value }}

                  {{ if eq $currentPage $termValue.Page.Permalink }}
                    <button
                      disabled
                      class=" border-primary/40 rounded border-2 px-1 text-primary border-primary"
                      href=" {{ $termValue.Page.Permalink }}"
                    >
                      {{ $termKey }}
                    </button>
                  {{ else }}
                    <a
                      class="text-gray-500 border-primary/40 rounded border-2 px-1 hover:text-primary hover:border-primary"
                      href=" {{ $termValue.Page.Permalink }}"
                      >{{ $termKey }}</a
                    >
                  {{ end }}
                {{ end }}
              </div>
            {{ end }}

          </li>
        {{ end }}
      {{ end }}
    </ul>
    <ul class="container swipe_left flex flex-col gap-8">
      {{ $logo :=  .Site.Params.logo }}
      {{ range (.Paginate .Pages.ByPublishDate.Reverse 4).Pages }}
        <li
          class="flex overflow-hidden border-current border-[0.5px] gap-4 h-40 rounded bg-slate-500/30"
        >
          <div class="w-1/3 size-40 ">
            {{ if .Params.hero_bg }}
              <img
                class="object-cover size-full"
                src="{{ .Params.hero_bg }}"
                alt="Image"
              />
            {{ else }}
              <img
                class="object-contain size-full"
                src="{{ $logo }}"
                alt="Image"
              />
            {{ end }}
          </div>
          <div class="w-full p-3 flex flex-col justify-between">
            <h3 class="text-base ">{{ .Params.title }}</h3>
            <p class="text-xsm line-clamp-3">
              {{ .Params.description }}
            </p>
            <div class="flex justify-between">
              <a
                href="{{ .RelPermalink }}"
                target="_blank"
                class="mt-auto hover:text-blue-800 shareIcon w-fit active:text-red-800"
              >
                {{ i18n ("readArticle") }}
              </a>
              <div>
                {{ range .Params.categories }}
                  <span
                    class="text-gray-500 border-primary/40 rounded border-2 px-1 hover:text-primary hover:border-primary"
                    >{{ . }}</span
                  >
                {{ end }}
                {{ range .Params.tags }}
                  <span
                    class="text-gray-500 border-primary/40 rounded border-2 px-1 hover:text-primary hover:border-primary"
                    >{{ . }}</span
                  >
                {{ end }}
              </div>
            </div>
          </div>
        </li>
      {{ end }}
    </ul>
    <div class="flex justify-center mt-3">
      {{ template "_internal/pagination.html" . }}
    </div>
    <script>
      window.addEventListener("beforeunload", () => {
        sessionStorage.setItem("scrollPosition", window.scrollY);
      });
      window.addEventListener("load", () => {
        const scrollPosition = sessionStorage.getItem("scrollPosition");
        if (scrollPosition) {
          window.scrollTo(0, parseInt(scrollPosition, 10));
          sessionStorage.removeItem("scrollPosition"); // Optional: Remove it after restoring
        }
      });
    </script>
  </main>
{{ end }}
